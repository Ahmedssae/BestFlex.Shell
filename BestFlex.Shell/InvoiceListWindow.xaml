<Window x:Class="BestFlex.Shell.InvoiceListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Invoices" Height="560" Width="920"
        WindowStartupLocation="CenterOwner">
    <DockPanel Margin="12">

        <!-- Filters -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="0,0,0,8">
            <TextBlock Text="From:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <DatePicker SelectedDate="{Binding StartDate}" Width="140" Margin="0,0,12,0"/>

            <TextBlock Text="To:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <DatePicker SelectedDate="{Binding EndDate}" Width="140" Margin="0,0,12,0"/>

            <TextBlock Text="Customer:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <ComboBox ItemsSource="{Binding Customers}"
                      SelectedItem="{Binding SelectedCustomer}"
                      DisplayMemberPath="Name" Width="220" Margin="0,0,12,0"/>

            <TextBox Width="160" Margin="0,0,8,0"
                     ToolTip="Invoice number contains"
                     Text="{Binding NumberLike, UpdateSourceTrigger=PropertyChanged}"/>

            <Button Content="Search" Width="100" Click="Search_Click"/>
        </StackPanel>

        <!-- List -->
        <DataGrid x:Name="GridInvoices"
                  ItemsSource="{Binding Invoices}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  MouseDoubleClick="GridInvoices_MouseDoubleClick" Width="336" Height="254">
            <DataGrid.Columns>
                <DataGridTextColumn Header="#" Width="70" Binding="{Binding Id}" />
                <DataGridTextColumn Header="Invoice No" Width="150" Binding="{Binding InvoiceNo}" />
                <DataGridTextColumn Header="Date" Width="180" Binding="{Binding IssuedAt, StringFormat={}{0:yyyy-MM-dd HH:mm}}"/>
                <DataGridTextColumn Header="Customer" Width="*" Binding="{Binding Customer}" />
                <DataGridTextColumn Header="Items" Width="80" Binding="{Binding ItemsCount}" />
                <DataGridTextColumn Header="Total" Width="120" Binding="{Binding Total, StringFormat={}{0:N2}}"/>
                <DataGridTextColumn Header="Curr" Width="60" Binding="{Binding Currency}" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Pagination Bar -->
        <Border DockPanel.Dock="Bottom" Margin="0,8,0,0" Padding="8" BorderBrush="#DDD" BorderThickness="1" Background="#F7F7F7">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Left: totals -->
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="{Binding TotalSummaryText}" />
                </StackPanel>

                <!-- Right: pager controls -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Page size:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                    <ComboBox Width="70"
                              ItemsSource="{Binding PageSizeOptions}"
                              SelectedItem="{Binding PageSize, Mode=TwoWay}" />
                    

                    <Separator Width="10" Opacity="0"/>

                    <Button Content="⟨ Prev" Width="80"
                            IsEnabled="{Binding HasPrevPage}"
                            Click="Prev_Click" Margin="6,0,6,0"/>
                    <TextBlock Text="{Binding PageIndicatorText}" VerticalAlignment="Center" />
                    <Button Content="Next ⟩" Width="80"
                            IsEnabled="{Binding HasNextPage}"
                            Click="Next_Click" Margin="6,0,6,0"/>

                    <TextBlock Text="Go to:" VerticalAlignment="Center" Margin="8,0,6,0"/>
                    <TextBox Width="50" Text="{Binding GoToPageText, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,6,0"/>
                    <Button Content="Go" Width="50" Click="Go_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Actions -->
        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button Content="Open" Width="100" Margin="0,0,8,0" Click="Open_Click"/>
            <Button Content="Close" Width="100" Click="Close_Click"/>
        </StackPanel>

    </DockPanel>
</Window>

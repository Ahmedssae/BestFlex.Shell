<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <!-- ========================= -->
    <!--   DESIGN TOKENS           -->
    <!-- ========================= -->

    <!-- Palette -->
    <Color x:Key="Color.Primary">#4F46E5</Color>
    <Color x:Key="Color.PrimaryHover">#4338CA</Color>
    <Color x:Key="Color.PrimaryPressed">#3730A3</Color>

    <Color x:Key="Color.Accent">#10B981</Color>
    <Color x:Key="Color.Danger">#EF4444</Color>

    <Color x:Key="Color.Surface">#FFFFFFFF</Color>
    <Color x:Key="Color.Background">#FFF7F7F7</Color>
    <Color x:Key="Color.Border">#FFE5E7EB</Color>
    <Color x:Key="Color.BorderStrong">#FFD1D5DB</Color>
    <Color x:Key="Color.Text">#FF111827</Color>
    <Color x:Key="Color.TextSecondary">#FF4B5563</Color>
    <Color x:Key="Color.TextMuted">#FF6B7280</Color>
    <Color x:Key="Color.Selection">#E6E8F9</Color>

    <!-- Brushes -->
    <SolidColorBrush x:Key="Brush.Primary" Color="{StaticResource Color.Primary}"/>
    <SolidColorBrush x:Key="Brush.PrimaryHover" Color="{StaticResource Color.PrimaryHover}"/>
    <SolidColorBrush x:Key="Brush.PrimaryPressed" Color="{StaticResource Color.PrimaryPressed}"/>
    <SolidColorBrush x:Key="Brush.Accent" Color="{StaticResource Color.Accent}"/>
    <SolidColorBrush x:Key="Brush.Danger" Color="{StaticResource Color.Danger}"/>

    <SolidColorBrush x:Key="Brush.Surface" Color="{StaticResource Color.Surface}"/>
    <SolidColorBrush x:Key="Brush.Background" Color="{StaticResource Color.Background}"/>
    <SolidColorBrush x:Key="Brush.Border" Color="{StaticResource Color.Border}"/>
    <SolidColorBrush x:Key="Brush.BorderStrong" Color="{StaticResource Color.BorderStrong}"/>
    <SolidColorBrush x:Key="Brush.Text" Color="{StaticResource Color.Text}"/>
    <SolidColorBrush x:Key="Brush.TextSecondary" Color="{StaticResource Color.TextSecondary}"/>
    <SolidColorBrush x:Key="Brush.TextMuted" Color="{StaticResource Color.TextMuted}"/>
    <SolidColorBrush x:Key="Brush.Selection" Color="{StaticResource Color.Selection}"/>

    <!-- Metrics -->
    <!-- FIX: use CornerRadius (not Double) so CornerRadius setters accept the resource -->
    <CornerRadius x:Key="Radius.Base">8</CornerRadius>
    <CornerRadius x:Key="Radius.Small">6</CornerRadius>

    <sys:Double x:Key="FontSize.Title">20</sys:Double>
    <sys:Double x:Key="FontSize.H2">16</sys:Double>
    <sys:Double x:Key="FontSize.Base">13</sys:Double>
    <FontFamily x:Key="Font.Main">Segoe UI</FontFamily>
    <Thickness x:Key="Padding.Control">10,6</Thickness>
    <Thickness x:Key="Padding.Card">12</Thickness>

    <Style TargetType="TextBlock">
        <Setter Property="FontFamily" Value="{StaticResource Font.Main}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSize.Base}"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.Text}"/>
        <Setter Property="TextWrapping" Value="NoWrap"/>
    </Style>

    <!-- ========================= -->
    <!--   SURFACE / CARD          -->
    <!-- ========================= -->

    <Style TargetType="Grid" x:Key="AppSurface">
        <Setter Property="Background" Value="{StaticResource Brush.Background}"/>
    </Style>

    <Style x:Key="Card" TargetType="Border">
        <Setter Property="CornerRadius" Value="{StaticResource Radius.Base}"/>
        <Setter Property="Background" Value="{StaticResource Brush.Surface}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="{StaticResource Padding.Card}"/>
    </Style>

    <!-- ========================= -->
    <!--   BUTTONS                 -->
    <!-- ========================= -->

    <Style x:Key="BtnBase" TargetType="Button">
        <Setter Property="FontFamily" Value="{StaticResource Font.Main}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSize.Base}"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Background" Value="{StaticResource Brush.Primary}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Primary}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="12,6"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="root"
                  CornerRadius="{StaticResource Radius.Small}"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter Margin="4,2" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="root" Property="Background" Value="{StaticResource Brush.PrimaryHover}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.PrimaryHover}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="root" Property="Background" Value="{StaticResource Brush.PrimaryPressed}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.PrimaryPressed}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.55"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Button" BasedOn="{StaticResource BtnBase}"/>

    <Style x:Key="BtnSecondary" TargetType="Button" BasedOn="{StaticResource BtnBase}">
        <Setter Property="Foreground" Value="{StaticResource Brush.Text}"/>
        <Setter Property="Background" Value="#FFF3F4F6"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.BorderStrong}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="root"
                  CornerRadius="{StaticResource Radius.Small}"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}">
                        <ContentPresenter Margin="4,2" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="root" Property="Background" Value="#FFEFF1F5"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="root" Property="Background" Value="#FFE5E7EB"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.55"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="BtnDanger" TargetType="Button" BasedOn="{StaticResource BtnBase}">
        <Setter Property="Background" Value="{StaticResource Brush.Danger}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Danger}"/>
    </Style>

    <!-- ========================= -->
    <!--   TEXTBOX / COMBOBOX      -->
    <!-- ========================= -->

    <Style TargetType="TextBox">
        <Setter Property="FontFamily" Value="{StaticResource Font.Main}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSize.Base}"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.Text}"/>
        <Setter Property="Padding" Value="{StaticResource Padding.Control}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.BorderStrong}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Background" Value="White"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Border x:Name="bd"
                  CornerRadius="{StaticResource Radius.Small}"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}">
                        <ScrollViewer x:Name="PART_ContentHost" Margin="0"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="bd" Property="BorderBrush" Value="{StaticResource Brush.Primary}"/>
                            <Setter TargetName="bd" Property="BorderThickness" Value="1.5"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="ComboBox">
        <Setter Property="FontFamily" Value="{StaticResource Font.Main}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSize.Base}"/>
        <Setter Property="Padding" Value="{StaticResource Padding.Control}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.BorderStrong}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Background" Value="White"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBox}">
                    <Grid>
                        <Border x:Name="bd"
                    CornerRadius="{StaticResource Radius.Small}"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"/>
                        <ToggleButton Name="ToggleButton"
                          Grid.Column="2"
                          Focusable="False"
                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                          ClickMode="Press"
                          Background="{x:Null}"
                          BorderBrush="{x:Null}">
                            <Path HorizontalAlignment="Right" Margin="0,0,10,0" VerticalAlignment="Center" Data="M 0 0 L 4 4 L 8 0 Z"
                    Fill="{StaticResource Brush.TextMuted}"/>
                        </ToggleButton>
                        <ContentPresenter Margin="8,2,28,2" VerticalAlignment="Center" HorizontalAlignment="Left"
                              Content="{TemplateBinding SelectionBoxItem}"/>
                        <Popup Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsDropDownOpen}"
                   AllowsTransparency="True" Focusable="False" PopupAnimation="Slide">
                            <Border CornerRadius="{StaticResource Radius.Small}"
                      Background="White" BorderBrush="{StaticResource Brush.BorderStrong}" BorderThickness="1">
                                <ScrollViewer>
                                    <StackPanel IsItemsHost="True" />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="bd" Property="BorderBrush" Value="{StaticResource Brush.Primary}"/>
                        </Trigger>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="bd" Property="BorderBrush" Value="{StaticResource Brush.Primary}"/>
                            <Setter TargetName="bd" Property="BorderThickness" Value="1.5"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ========================= -->
    <!--   DATAGRID                -->
    <!-- ========================= -->

    <Style TargetType="DataGrid">
        <Setter Property="FontFamily" Value="{StaticResource Font.Main}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSize.Base}"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.Text}"/>
        <Setter Property="Background" Value="{StaticResource Brush.Surface}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="RowHeight" Value="34"/>
        <Setter Property="HeadersVisibility" Value="Column"/>
        <Setter Property="GridLinesVisibility" Value="Horizontal"/>
        <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="VerticalGridLinesBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="AlternatingRowBackground" Value="#FAFAFA"/>
        <Setter Property="SelectionMode" Value="Extended"/>
        <Setter Property="SelectionUnit" Value="FullRow"/>
        <Setter Property="ColumnHeaderHeight" Value="34"/>
        <Setter Property="RowHeaderWidth" Value="0"/>
        <Setter Property="CanUserAddRows" Value="False"/>
    </Style>

    <Style TargetType="DataGridColumnHeader">
        <Setter Property="Background" Value="#F3F4F6"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextSecondary}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="Padding" Value="8,0"/>
    </Style>

    <Style TargetType="DataGridRow">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
        <Setter Property="Background" Value="{x:Null}"/>
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="{StaticResource Brush.Selection}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- ========================= -->
    <!--   SCROLLBAR               -->
    <!-- ========================= -->

    <Style TargetType="ScrollBar">
        <Setter Property="Background" Value="#00000000"/>
        <Setter Property="Foreground" Value="#B8BCC6"/>
        <Setter Property="Width" Value="10"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ScrollBar}">
                    <Grid x:Name="Bg" Background="{TemplateBinding Background}">
                        <Track Name="PART_Track" IsDirectionReversed="true">
                            <Track.Thumb>
                                <Thumb Background="{TemplateBinding Foreground}" Opacity="0.6" />
                            </Track.Thumb>
                        </Track>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>

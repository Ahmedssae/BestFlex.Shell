<Window x:Class="BestFlex.Shell.InvoiceDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Invoice" Height="560" Width="900"
        WindowStartupLocation="CenterOwner">
    <DockPanel Margin="12">

        <!-- Header -->
        <Grid DockPanel.Dock="Top" Margin="0,0,0,8">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="{Binding InvoiceNo}" FontSize="18" FontWeight="SemiBold"/>
            <TextBlock Grid.Column="1" Text="{Binding IssuedAt, StringFormat={}{0:yyyy-MM-dd HH:mm}}"
                       HorizontalAlignment="Left"/>
            <TextBlock Grid.Column="2" Text="{Binding Customer}" HorizontalAlignment="Right"/>

            <StackPanel Grid.Row="1" Orientation="Horizontal" Grid.ColumnSpan="3" Margin="0,6,0,0">
                <TextBlock Text="Issuer:" Margin="0,0,6,0"/>
                <TextBlock Text="{Binding Issuer}" Margin="0,0,16,0"/>
                <TextBlock Text="Currency:" Margin="0,0,6,0"/>
                <TextBlock Text="{Binding Currency}" Margin="0,0,16,0"/>
                <TextBlock Text="Notes:" Margin="0,0,6,0"/>
                <TextBlock Text="{Binding Description}"/>
            </StackPanel>
        </Grid>

        <!-- Lines -->
        <DataGrid ItemsSource="{Binding Lines}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True" Width="367">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Code"   Binding="{Binding Code}" Width="120"/>
                <DataGridTextColumn Header="Name"   Binding="{Binding Name}" Width="*"/>
                <DataGridTextColumn Header="Qty"    Binding="{Binding Qty,        StringFormat={}{0:N2}}" Width="100"/>
                <DataGridTextColumn Header="Price"  Binding="{Binding UnitPrice,  StringFormat={}{0:N2}}" Width="120"/>
                <DataGridTextColumn Header="Total"  Binding="{Binding LineTotal,  StringFormat={}{0:N2}}" Width="120"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Footer -->
        <Grid DockPanel.Dock="Bottom" Margin="0,8,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0"
                       Text="{Binding Total, StringFormat={}{0:N2}}"
                       FontSize="18" FontWeight="SemiBold"
                       HorizontalAlignment="Left" VerticalAlignment="Center"/>

            <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Preview..." Width="120" Click="Preview_Click" Margin="0,0,8,0"/>
                <Button Content="Export PDF" Width="120" Click="ExportPdf_Click" Margin="0,0,8,0"/>
                <Button Content="Print" Width="120" Click="Print_Click" Margin="0,0,8,0"/>
                <Button Content="Close" Width="120" Click="Close_Click"/>
            </StackPanel>
        </Grid>

    </DockPanel>
</Window>
